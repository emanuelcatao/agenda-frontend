<h2 mat-dialog-title>Editar Contato</h2>

<mat-dialog-content>
    <form enctype="multipart/form-data" [formGroup]="form" class="form-layout">
        <div class="left-column">
            <img *ngIf="previewUrl; else defaultImage" [src]="previewUrl" alt="Pré-visualização da imagem" class="preview-image">
            <ng-template #defaultImage>
                <img src="../../../assets/default-profile-pic.png" alt="Imagem padrão" class="preview-image">
            </ng-template>

            <input type="file" (change)="handleFileInput($event)" accept="image/*" class="file-input"> <span class="required-marker">*</span>
        </div>

        <div class="right-column">
            <mat-form-field>
                <input matInput placeholder="Nome *" formControlName="nome"> <span class="required-marker">*</span>
            </mat-form-field>
        
            <mat-form-field>
                <input matInput placeholder="Email" formControlName="email"> <span class="required-marker">*</span>
                <mat-error *ngIf="form.get('email')?.hasError('email') && form.get('email')?.touched">
                    Email inválido!
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput #telefoneInput placeholder="Telefone" formControlName="telefone" (keyup)="applyPhoneMask($event)" (blur)="onTelefoneBlur(telefoneInput)"><span class="required-marker">*</span>
                <mat-error *ngIf="form.get('telefone')?.hasError('incorrect') && form.get('telefone')?.touched">
                    Formato de telefone inválido!
                </mat-error>                
            </mat-form-field>
        
            <mat-form-field>
                <input matInput [matDatepicker]="picker" placeholder="Data de Nascimento" formControlName="dataNascimento"><span class="required-marker">*</span>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions>
    <button mat-button mat-dialog-close>Cancelar</button>
    <button mat-button (click)="salvar()">Salvar</button>
</mat-dialog-actions>

